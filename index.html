<!DOCTYPE html>
<head>
<!--
      <link rel="stylesheet" href="http://libs.cartocdn.com/cartodb.js/v3/themes/css/cartodb.css" />
    <script src="https://maps.googleapis.com/maps/api/js?sensor=false&v=3.8"></script>
    <script src="http://libs.cartocdn.com/cartodb.js/v3/cartodb.js"></script>
      <script src="js/l.geosearch.mod.js"></script>
  <script src="js/leaflet-hash.js"></script>
-->

        <link rel="stylesheet" href="http://libs.cartocdn.com/cartodb.js/v3/3.11/themes/css/cartodb.css" />
    <!--[if lte IE 8]>
    <link rel="stylesheet" href="http://libs.cartocdn.com/cartodb.js/v2/themes/css/cartodb.ie.css" />
    <![endif]-->
    <link rel="stylesheet" href="css/l.geosearch.mod.css" />
      <!--libraries kept to a minimum. Bootstrap could be used a la carte here, but I'm being lazy-->
  <script src="http://libs.cartocdn.com/cartodb.js/v3/3.11/cartodb.js"></script>
  <script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/js/bootstrap.min.js"></script>
  <script src="js/leaflet-hash.js"></script>
    <script src="js/l.geosearch.mod.js"></script>


     <style>
      html, body {
        height: 100%;
        padding: 0;
        margin: 0;
      }
    #map {
        width: 100%; /*height:100%;*/ position: absolute; top: 0px; bottom: 0px; background: black; z-index:1;}

    </style>
    </head>
 
<body>
    <div id="map"></div>  
    <script>
        

        
window.onload = function main() {
  cartodb.createVis('map', 'http://zenontc.cartodb.com/api/v2/viz/3dcc33be-62de-11e4-b17b-0e9d821ea90d/viz.json', {
      //add CartoDB geocoder
search: true
  })
  .done(function (vis, layers) {
      //get native leaflet map for basemap selector tool
      map = vis.getNativeMap();
      console.log(map);
  })
  .error(function (err) {
                console.log(err);
            });
}


//  TESTING  // GOOOGLE GEOCODER PARAMETERS
//    
//    function getURLParameter(name) {
//       return decodeURI(
//       (RegExp(name + '=' + '(.+?)(&|$)').exec(location.search) || [, ])[1]);
//    }
//    
//    var regionParameter = getURLParameter('region');
//    var region = (regionParameter === 'undefined') ? '' : regionParameter;

// GOOGLE GEOCODER CONTROLS
//       new L.Control.GeoSearch({
//           provider: new L.GeoSearch.Provider.Google({
//               region: region
//           })
//       }).addTo(map);
        
        </script>
</body>

